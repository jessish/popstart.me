(function(a,b,c,d){"use strict",Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={version:"4.0.0",settings:{timer_speed:1e4,animation_speed:500,bullets:!0,stack_on_small:!0,container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning"},init:function(b,c,d){var e=this;typeof c=="object"&&a.extend(!0,e.settings,c),a("[data-orbit]",b).each(a.proxy(e._init,e))},_container_html:function(){var a=this;return'<div class="'+a.settings.container_class+'"></div>'},_bullets_container_html:function(b){var c=this,d=a('<ol class="'+c.settings.bullets_container_class+'"></ol>');return b.each(function(b,e){var f=a('<li data-orbit-slide-number="'+(b+1)+'" class=""></li>');b===0&&f.addClass(c.settings.bullets_active_class),d.append(f)}),d},_slide_number_html:function(b,c){var d=this,e=a('<div class="'+d.settings.slide_number_class+'"></div>');return e.append("<span>"+b+"</span> of <span>"+c+"</span>"),e},_timer_html:function(){var a=this;return typeof a.settings.timer_speed=="number"&&a.settings.timer_speed>0?'<div class="'+a.settings.timer_container_class+'"><span></span><div class="'+a.settings.timer_progress_class+'"></div></div>':""},_next_html:function(){var a=this;return'<a href="#" class="'+a.settings.next_class+'">Next <span></span></a>'},_prev_html:function(){var a=this;return'<a href="#" class="'+a.settings.prev_class+'">Prev <span></span></a>'},_init:function(b,c){var d=this,e=a(c),f=e.wrap(d._container_html()).parent(),g=e.children();f.append(d._prev_html()),f.append(d._next_html()),e.addClass(d.settings.slides_container_class),d.settings.stack_on_small&&f.addClass(d.settings.stack_on_small_class),f.append(d._slide_number_html(1,g.length)),f.append(d._timer_html()),d.settings.bullets&&f.after(d._bullets_container_html(g)),e.append(g.first().clone().attr("data-orbit-slide","")),e.prepend(g.last().clone().attr("data-orbit-slide","")),e.css("marginLeft","-100%"),g.first().addClass(d.settings.active_slide_class),d._init_events(e),d._init_dimensions(e),d._start_timer(e)},_init_events:function(e){var f=this,g=e.parent();a(b).on("load.fndtn.orbit",function(){e.height(""),e.height(e.height(g.height())),e.trigger("orbit:ready")}).on("resize.fndtn.orbit",function(){e.height(""),e.height(e.height(g.height()))}),a(c).on("click.fndtn.orbit","[data-orbit-link]",function(b){b.preventDefault();var c=a(b.currentTarget).attr("data-orbit-link"),d=e.find("[data-orbit-slide="+c+"]").first();d.length===1&&(f._reset_timer(e,!0),f.goto(e,d.index(),function(){}))}),g.siblings("."+f.settings.bullets_container_class).on("click.fndtn.orbit","[data-orbit-slide-number]",function(b){b.preventDefault(),f._reset_timer(e,!0),f.goto(e,a(b.currentTarget).data("orbit-slide-number"),function(){})}),g.on("orbit:after-slide-change.fndtn.orbit",function(a,b){var c=g.find("."+f.settings.slide_number_class);c.length===1&&c.replaceWith(f._slide_number_html(b.slide_number,b.total_slides))}).on("orbit:next-slide.fndtn.orbit click.fndtn.orbit","."+f.settings.next_class,function(a){a.preventDefault(),f._reset_timer(e,!0),f.goto(e,"next",function(){})}).on("orbit:prev-slide.fndtn.orbit click.fndtn.orbit","."+f.settings.prev_class,function(a){a.preventDefault(),f._reset_timer(e,!0),f.goto(e,"prev",function(){})}).on("orbit:toggle-play-pause.fndtn.orbit click.fndtn.orbit touchstart.fndtn.orbit","."+f.settings.timer_container_class,function(b){b.preventDefault();var c=a(b.currentTarget).toggleClass(f.settings.timer_paused_class),d=c.closest("."+f.settings.container_class).find("."+f.settings.slides_container_class);c.hasClass(f.settings.timer_paused_class)?f._stop_timer(d):f._start_timer(d)}).on("touchstart.fndtn.orbit",function(a){a.touches||(a=a.originalEvent);var b={start_page_x:a.touches[0].pageX,start_page_y:a.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:d};g.data("swipe-transition",b),a.stopPropagation()}).on("touchmove.fndtn.orbit",function(a){a.touches||(a=a.originalEvent);if(a.touches.length>1||a.scale&&a.scale!==1)return;var b=g.data("swipe-transition");typeof b=="undefined"&&(b={}),b.delta_x=a.touches[0].pageX-b.start_page_x,typeof b.is_scrolling=="undefined"&&(b.is_scrolling=!!(b.is_scrolling||Math.abs(b.delta_x)<Math.abs(a.touches[0].pageY-b.start_page_y)));if(!b.is_scrolling&&!b.active){a.preventDefault(),f._stop_timer(e);var c=b.delta_x<0?"next":"prev";b.active=!0,f.goto(e,c,function(){})}}).on("touchend.fndtn.orbit",function(a){g.data("swipe-transition",{}),a.stopPropagation()})},_init_dimensions:function(a){var b=a.parent(),c=a.children();a.css("width",c.length*100+"%"),c.css("width",100/c.length+"%"),a.height(b.height()),a.css("width",c.length*100+"%")},_start_timer:function(a){var b=this,c=a.parent(),d=function(){b._reset_timer(a,!1),b.goto(a,"next",function(){b._start_timer(a)})},e=c.find("."+b.settings.timer_container_class),f=e.find("."+b.settings.timer_progress_class),g=f.width()/e.width(),h=b.settings.timer_speed-g*b.settings.timer_speed;f.animate({width:"100%"},h,"linear",d).data("is-original","beans?"),a.trigger("orbit:timer-started")},_stop_timer:function(a){var b=this,c=a.parent(),d=c.find("."+b.settings.timer_container_class),e=d.find("."+b.settings.timer_progress_class),f=e.width()/d.width();b._rebuild_timer(c,f*100+"%"),a.trigger("orbit:timer-stopped"),d=c.find("."+b.settings.timer_container_class),d.addClass(b.settings.timer_paused_class)},_reset_timer:function(a,b){var c=this,d=a.parent();c._rebuild_timer(d,"0%");if(typeof b=="boolean"&&b){var e=d.find("."+c.settings.timer_container_class);e.addClass(c.settings.timer_paused_class)}},_rebuild_timer:function(b,c){var d=this,e=b.find("."+d.settings.timer_container_class),f=a(d._timer_html()),g=f.find("."+d.settings.timer_progress_class);if(typeof Zepto=="function")e.remove(),b.append(f),g.css("width",c);else if(typeof jQuery=="function"){var h=e.find("."+d.settings.timer_progress_class);h.css("width",c),h.stop()}},"goto":function(b,c,d){var e=this,f=b.parent(),g=b.children(),h=b.find("."+e.settings.active_slide_class),i=h.index();if(f.hasClass(e.settings.orbit_transition_class))return!1;c==="prev"?i===0?i=g.length-1:i--:c==="next"?i=(i+1)%g.length:typeof c=="number"&&(i=c%g.length),i===g.length-1&&c==="next"?(b.css("marginLeft","0%"),i=1):i===0&&c==="prev"&&(b.css("marginLeft","-"+(g.length-1)*100+"%"),i=g.length-2),f.addClass(e.settings.orbit_transition_class),h.removeClass(e.settings.active_slide_class),a(g[i]).addClass(e.settings.active_slide_class);var j=f.siblings("."+e.settings.bullets_container_class);j.length===1&&(j.children().removeClass(e.settings.bullets_active_class),a(j.children()[i-1]).addClass(e.settings.bullets_active_class));var k="-"+i*100+"%";b.trigger("orbit:before-slide-change"),b.css("marginLeft")===k?(f.removeClass(e.settings.orbit_transition_class),b.trigger("orbit:after-slide-change",[{slide_number:i,total_slides:b.children().length-2}]),d()):b.animate({marginLeft:k},e.settings.animation_speed,"linear",function(){f.removeClass(e.settings.orbit_transition_class),b.trigger("orbit:after-slide-change",[{slide_number:i,total_slides:b.children().length-2}]),d()})}}})(Foundation.zj,this,this.document);